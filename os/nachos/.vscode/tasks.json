{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "clean",
      "type": "shell",
      "command": "rm -rf ./code/callgrind.out.* report report.xml",
      "options": {
        "cwd": "${workspaceRoot}"
      },
      "presentation": {
        "reveal": "silent"
      }
    },
    {
      "label": "cppcheck",
      "type": "shell",
      "command": "cppcheck --check-config --enable=all --suppress=missingIncludeSystem --xml-version=2 code/filesys/*.c code/machine/*.c code/network/*.c code/test/*.c code/threads/*.c code/userprog/*.c code/filesys/*.h code/machine/*.h code/network/*.h code/test/*.h code/threads/*.h code/userprog/*.h 2> report.xml && cppcheck-htmlreport --source-dir=. --report-dir=report --file=report.xml --title=Nachos && google-chrome file://`pwd`/report/index.html",
      "options": {
        "cwd": "${workspaceRoot}"
      },
      "presentation": {
        "reveal": "silent"
      }
    },
    {
      "label": "valgrind",
      "type": "shell",
      "command": "valgrind ${input:debugBin}",
      "options": {
        "cwd": "${workspaceRoot}/code"
      },
      "presentation": {
        "reveal": "always"
      }
    },
    {
      "label": "valgrind mem leak full check and verbose",
      "type": "shell",
      "command": "valgrind --leak-check=full -v ${input:debugBin}",
      "options": {
        "cwd": "${workspaceRoot}/code"
      },
      "presentation": {
        "reveal": "always"
      }
    },
    {
      "label": "valgrind callgrind",
      "type": "shell",
      "command": "valgrind --tool=callgrind ${input:debugBin} && echo 'use kcachegrind'",
      "options": {
        "cwd": "${workspaceRoot}/code"
      },
      "presentation": {
        "reveal": "always"
      }
    },
    {
      "label": "make",
      "type": "shell",
      "command": "make -j 4",
      "options": {
        "cwd": "${workspaceRoot}/code"
      },
      "presentation": {
        "reveal": "silent"
      }
    }
  ],
  "inputs": [
    {
      "id": "debugBin",
      "description": "executable args:",
      "default": "./userprog/nachos -x ./test/",
      "type": "promptString"
    }
  ]
}